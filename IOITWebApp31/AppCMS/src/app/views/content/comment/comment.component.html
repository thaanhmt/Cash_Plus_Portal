<div class="animated fadeIn">
  <div class="card">
    <div class="card-header">
      <i class="fa fa-edit"></i> Danh sách bình luận
      <div class="card-header-actions">
      </div>
    </div>
    <div class="card-body">
      <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
        <div class="row">
          <div class="col-sm-12 col-md-6">
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="button-custom">
              <!--<button class="btn btn-block btn-primary hideChild" type="button" (click)="OpenAddModal()"><i class="fa fa-plus"></i>&nbsp;Thêm mới</button>-->
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-6">
            <div class="dataTables_length" id="DataTables_Table_0_length">
              <label>
                Xem&nbsp;
                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" class="custom-select custom-select-sm form-control form-control-sm" [(ngModel)]="paging.page_size" (change)="GetListComment()">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>&nbsp;bản ghi
              </label>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div id="DataTables_Table_0_filter" class="dataTables_filter">
              <label>
                Tìm kiếm:
                <input type="text" class="form-control form-control-sm" placeholder="" aria-controls="DataTables_Table_0" [(ngModel)]="q.txtSearch" (keyup.enter)="QueryChanged(false)">
              </label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-2">
            <ng-select [items]="typeComment"
              bindLabel="Name"
              bindValue="TargetType"
              [multiple]="false"
              placeholder="Chọn loại bình luận"
              (change)="QueryChanged(true)"
              [(ngModel)]="q.TargetType"
              [ngModelOptions]="{standalone: true}">
            </ng-select>
          </div>
          <div class="col-sm-6 col-md-2" *ngIf="q.TargetType==1">
            <ng-select [items]="listProduct"
              bindLabel="Name"
              bindValue="ProductId"
              [multiple]="false"
              placeholder="Chọn sản phẩm"
              (change)="QueryChanged(false)"
              [(ngModel)]="q.TargetProductId"
              [ngModelOptions]="{standalone: true}">
            </ng-select>
          </div>
          <div class="col-sm-6 col-md-2" *ngIf="q.TargetType==2">
            <ng-select [items]="listNews"
              bindLabel="Title"
              bindValue="NewsId"
              [multiple]="false"
              placeholder="Chọn bài viết"
              (change)="QueryChanged(false)"
              [(ngModel)]="q.TargetNewsId"
              [ngModelOptions]="{standalone: true}">
            </ng-select>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12">
            <table class="table table-striped table-bordered datatable dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="border-collapse: collapse !important">
              <thead>
                <tr role="row" class="text-center">
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Role: activate to sorlistCatePaget column ascending" style="width: 30px;">STT</th>
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Role: activate to sorlistCatePaget column ascending" style="width: 100px;">
<!--                     <i class="fa fa-caret-up" style="float:right" *ngIf="showSort[0]" (click)="Sort( false, 'Name', 0)"></i>
                    <i class="fa fa-caret-down" style="float:right" *ngIf="showSort[0]==false" (click)="Sort(true,'Name', 0)"></i> -->
                    Người bình luận
                  </th>
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Role: activate to sorlistCatePaget column ascending" style="width: 100px;">
<!--                     <i class="fa fa-caret-up" style="float:right" *ngIf="showSort[1]" (click)="Sort( false, 'Name', 1)"></i>
                    <i class="fa fa-caret-down" style="float:right" *ngIf="showSort[1]==false" (click)="Sort(true,'Name', 1)"></i> -->
                    Loại bình luận
                  </th>
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 235px;">Nội dung</th>
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Date registered: activate to sort column ascending" style="width: 50px;">Ẩn/Hiện</th>
                  <th class="" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" style="width: 100px;">Thao tác</th>
                </tr>
              </thead>
              <tbody>
                <ng-template ngFor let-item [ngForOf]="listComment" let-i="index">
                  <tr (click)="Expand(i)" style="cursor: pointer;">
                    <td style="text-align: center; width:30px"><b>{{ (paging.page - 1) * paging.page_size + i + 1 }}</b></td>
                    <td class="sorting_1">{{ item.CustomerName }}</td>
                    <td>
                      <span *ngIf="item.TargetType==1">Sản phẩm</span>
                      <span *ngIf="item.TargetType==2">Tin tức</span>
                    </td>
                    <td>
                      <span tooltip="{{ item.Contents }}">{{ (item.Contents.length > 50) ? (item.Contents | slice:0:50) + '...' : (item.Contents) }}</span>
                    </td>
                    <td >
                      <label style="display: block; padding-top: 2px; margin: auto;" class="switch switch-label switch-pill switch-outline-primary-alt">
                        <input (change)="ShowHide(item.CommentId,i,undefined)" type="checkbox" class="switch-input" [(ngModel)]="item.IsShow" [ngModelOptions]="{standalone: true}" />
                        <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
                      </label>
                    </td>
                    <td style="text-align: center;">
                      <!-- <a class="btn btn-success" href="javascript:void(0)" tooltip="Chi tiết">
                        <i class="fa fa-search-plus"></i>
                      </a>
                      <a class="btn btn-info" href="javascript:void(0)" (click)="OpenEditModal(item)" tooltip="Sửa">
                        <i class="fa fa-edit"></i>
                      </a> -->
                      <a class="btn btn-danger" href="javascript:void(0)" (click)="ShowConfirmDelete(item.CommentId)" tooltip="Xóa">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>
                  <tr [ngClass]="item.Expand ? 'show' : 'hideChild'" *ngFor="let childItem of item.listChildComment; let idx = index" role="row" ng-class-odd='odd' ng-class-even='even'>
                    <td style="text-align: center; width:30px"><b>&nbsp;&nbsp;&nbsp;{{ (paging.page - 1) * paging.page_size + i + 1 }}.{{idx + 1}}</b></td>
                    <td class="sorting_1">{{ childItem.CustomerName }}</td>
                    <td>
                      <span *ngIf="childItem.TargetType==1">Sản phẩm</span>
                      <span *ngIf="childItem.TargetType==2">Tin tức</span>
                    </td>
                    <td>
                      <span tooltip="{{ childItem.Contents }}">{{ (childItem.Contents.length > 50) ? (childItem.Contents | slice:0:50) + '...' : (childItem.Contents) }}</span>
                    </td>
                    <td >
                      <label style="display: block; padding-top: 2px; margin: auto;" class="switch switch-label switch-pill switch-outline-primary-alt">
                        <input (change)="ShowHide(childItem.CommentId,i,idx)" type="checkbox" class="switch-input" [(ngModel)]="childItem.IsShow" [ngModelOptions]="{standalone: true}" />
                        <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
                      </label>
                    </td>
                    <td style="text-align: center;">
                      <!-- <a class="btn btn-success" href="javascript:void(0)" tooltip="Chi tiết">
                        <i class="fa fa-search-plus"></i>
                      </a>
                      <a class="btn btn-info" href="javascript:void(0)" (click)="OpenEditModal(childItem)" tooltip="Sửa">
                        <i class="fa fa-edit"></i>
                      </a> -->
                      <a class="btn btn-danger" href="javascript:void(0)" (click)="ShowConfirmDelete(childItem.CommentId)" tooltip="Xóa">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>
                </ng-template>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-5">
            <div *ngIf="paging.item_count > 0" class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">
              Hiển thị <span>{{ (paging.page - 1) * paging.page_size + 1 }}</span> <i class="fa fa-long-arrow-right"></i>  <span>{{ paging.item_count < paging.page * paging.page_size ? paging.item_count : paging.page * paging.page_size }}</span>&nbsp;<i class="fa fa-ellipsis-v"></i>&nbsp;<span>{{ paging.item_count }}</span> bản ghi
            </div>
          </div>
          <div class="col-xs-12 col-md-7">
            <pagination [totalItems]="paging.item_count" [(ngModel)]="paging.page" [maxSize]="5" [itemsPerPage]="paging.page_size" class="pagination-sm pull-right"
                        previousText="&lsaquo;" nextText="&rsaquo;" [boundaryLinks]="true" (pageChanged)="PageChanged($event)"></pagination>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
