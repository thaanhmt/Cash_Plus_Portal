<div class="animated fadeIn cms-main">
  <div class="card cms-content">
    <div class="titleCat">
      <h1 class="cms-heading-inline">Danh sách ảnh thumb</h1>
      <button class="cms-addnew" type="button" (click)="OpenConfigThumbModal(undefined)"><i class="fa fa-plus"></i>&nbsp;Thêm mới</button>
    </div>
    <div class="description-page">
      <blockquote class="{{isNoitify ? 'hidden' : ''}}">
        <p>Khu vực hiển thị danh sách các loại cấu hình các hình ảnh cho bài viết và các slider, banner quảng cáo. Thay đổi kích thước của chúng để phù hợp với website</p>
        <a class="close" href="javascript:void(0)" (click)="closeNoityfy()"><span>×</span></a>
      </blockquote>
    </div>
    <div class="card-body">
      <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">

        <div class="row cms-filter">
          <div class="col-sm-12 col-md-6" style="padding-left:0px; margin-left: -5px;    display: flex;">
            <ul class="cms-subsubsub">
              <li class="all"><a class="current" aria-current="page">Tất cả <span class="count">({{ paging.item_count }})</span></a> | </li>
              <li class="publish"><a>Hiển thị <span class="count">({{ paging.item_count }})</span></a> </li>
            </ul>
          </div>
          <div class="col-sm-12 col-md-6" style="display: flex; justify-content: flex-end;align-items: flex-end; padding-right:0">

            <label style="margin-right:10px;display: flex;align-items: center;">
              <span class="search-box">Tìm kiếm</span>
              <input type="text" class="form-control form-control-sm" placeholder="Nhập từ khóa cần tìm...." aria-controls="DataTables_Table_0" [(ngModel)]="q.txtSearch" (keyup.enter)="QueryChanged()">
            </label>

            <div class="dataTables_length" id="DataTables_Table_0_length">
              <label>
                Xem&nbsp;
                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" class="custom-select custom-select-sm form-control form-control-sm" [(ngModel)]="paging.page_size" (change)="GetListConfigThumb()">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>&nbsp;bản ghi
              </label>
            </div>
          </div>
        </div>
        <div class="row cms-filter action-table">
          <div class="col-sm-6 col-md-3" style="padding-left:0;">
            <ng-select class="mw150-select"
                       [items]="ActionTable"
                       bindLabel="Name"
                       bindValue="Id"
                       [clearable]="true"
                       placeholder="Tác vụ"
                       [(ngModel)]="ActionId"
                       [ngModelOptions]="{standalone: true}">
            </ng-select>
            <button class="cms-addnew button-action" type="button" [disabled]="!ActionId" (click)="ActionTableFunc()">&nbsp;Áp dụng</button>
          </div>
          <div class="col-sm-12 col-md-9" style="padding-right:0; text-align:right;">
            <ng-select class="mw200-select"
                       [items]="typeUpload"
                       bindLabel="Name"
                       bindValue="Id"
                       placeholder="Loại thumb"
                       (change)="QueryChanged()"
                       [(ngModel)]="q.Type"
                       [ngModelOptions]="{standalone: true}">
            </ng-select>
          </div>
        </div>
        <div class="row content-table-data">
          <div class="col-sm-12">
            <table class="table list-cat table-striped table-bordered datatable dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="border-collapse: collapse !important">
              <thead>
                <tr role="row">
                  <th class="btn-action-table" style="width: 5%;">
                    <div class="squaredcheck">
                      <input type="checkbox" class="checkbox1" id="CheckAll" name="CheckAll" [value]="true" (change)="CheckActionTable(undefined)" [(ngModel)]="CheckAll">
                      <label for="CheckAll"><span></span></label>
                    </div>
                  </th>
                  <th style="width: 250px;">
                    Chiều rộng
                  </th>
                  <th style="width: 100px;" class="text-right">
                    Chiều rộng
                  </th>
                  <th style="width: 100px;" class="text-right">
                    Chiều cao
                  </th>
                  <th style="width: 150px;">
                    Loại thumb
                  </th>
                  <!-- <th style="width: 100px;">Thao tác</th> -->
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of listConfigThumb; let i = index" role="row" ng-class-odd='odd' ng-class-even='even'>
                  <td class="btn-action-table" style="padding: 0.75rem!important;">
                    <div class="squaredcheck">
                      <input type="checkbox" class="checkbox1" id="Check{{item.ConfigThumbId}}" name="Check{{item.ConfigThumbId}}" [value]="true" [(ngModel)]="item.Action" (change)="CheckActionTable(item.ConfigThumbId)">
                      <label for="Check{{item.ConfigThumbId}}"><span></span></label>
                    </div>
                  </td>
                  <td class="sorting_1 name-child column-name">
                    {{ item.Name }}
                    <ul class="cms-function">
                      <li class="id-item">ID: {{item.ConfigThumbId}} | </li>
                      <li (click)="ShowConfirmGenThumb(item.Type, item.Width)">Gen ảnh | </li>
                      <li (click)="OpenConfigThumbModal(item)">Chỉnh sửa | </li>
                      <li (click)="ShowConfirmDelete(item.ConfigThumbId)" class="detete-item">Xóa</li>
                    </ul>
                  </td>
                  <td class="sorting_1 text-right">{{ item.Width }}</td>
                  <td class="sorting_1 text-right">{{ item.Height }}</td>
                  <td>
                    {{ FindTypeThumb(item.Type) }}
                  </td>
                  <!-- <td style="text-align: center;">
                  <a class="btn btn-info" href="javascript:void(0)" (click)="ShowConfirmGenThumb(item.Type , item.Width)">
                    <i class="fa fa-file-image-o"></i>
                  </a>
                  <a class="btn btn-info" href="javascript:void(0)" (click)="OpenConfigThumbModal(item)">
                    <i class="fa fa-edit"></i>
                  </a>
                  <a class="btn btn-danger" href="javascript:void(0)" (click)="ShowConfirmDelete(item.ConfigThumbId)">
                    <i class="fa fa-trash"></i>
                  </a>
                </td> -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row cms-paging">
          <div class="col-sm-12 col-md-5">
            <div *ngIf="paging.item_count > 0" class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">
              Hiển thị <span>{{ (paging.page - 1) * paging.page_size + 1 }}</span> <i class="fa fa-long-arrow-right"></i>  <span>{{ paging.item_count < paging.page * paging.page_size ? paging.item_count : paging.page * paging.page_size }}</span>&nbsp;<i class="fa fa-ellipsis-v"></i>&nbsp;<span>{{ paging.item_count }}</span> bản ghi
            </div>
          </div>
          <div class="col-xs-12 col-md-7">
            <pagination [totalItems]="paging.item_count" [(ngModel)]="paging.page" [maxSize]="5" [itemsPerPage]="paging.page_size" class="pagination-sm"
                        previousText="&lsaquo;" nextText="&rsaquo;" [boundaryLinks]="true" (pageChanged)="PageChanged($event)" class="pull-right"></pagination>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div [config]="{backdrop: 'static',  keyboard: false}" bsModal #ConfigThumbModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <form class="login-form">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" *ngIf="Item.ConfigThumbId == undefined">Thêm mới</h4>
          <h4 class="modal-title" *ngIf="Item.ConfigThumbId != undefined">Cập nhật</h4>
          <button type="button" class="close" (click)="ConfigThumbModal.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card" style="border: none; padding-bottom: 1.5rem; margin-bottom: unset;">
            <div class="card-body body-form-add-new">
              <div class="col-sm-12 col-md-12" style="margin: 20px 0px;">
                <div class="form-group row">
                  <label class="col-md-4 col-form-label" for="Name">Tên hiển thị<span *ngIf="Item.Name==undefined || Item.Name == ''" style="color: red;">&ngsp;(*)</span></label>
                  <div class="col-md-8">
                    <input type="text" id="Name" name="Name" class="form-control" placeholder="" [(ngModel)]="Item.Name" autocomplete="off">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-4 col-form-label" for="width">Chiều rộng<span *ngIf="Item.Width==undefined || Item.Width <= 0" style="color: red;">&ngsp;(*)</span></label>
                  <div class="col-md-8">
                    <input type="number" id="width" name="width" class="form-control" min="0" placeholder="" [(ngModel)]="Item.Width" autocomplete="off">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-4 col-form-label" for="Height">Chiều cao<span *ngIf="Item.Height==undefined || Item.Height <= 0" style="color: red;">&ngsp;(*)</span></label>
                  <div class="col-md-8">
                    <input type="number" id="Height" name="Height" class="form-control" min="0" placeholder="" [(ngModel)]="Item.Height" autocomplete="off">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-4 col-form-label" for="">Loại thumb<span *ngIf="Item.Type==undefined" style="color: red;">&ngsp;(*)</span></label>
                  <div class="col-md-8" style="">
                    <ng-select [items]="typeUpload"
                               bindLabel="Name"
                               bindValue="Id"
                               placeholder="Chọn loại thumb"
                               [(ngModel)]="Item.Type"
                               [ngModelOptions]="{standalone: true}">
                    </ng-select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" appNoDblClickMat (click)="SaveConfigThumb()">Lưu thông tin</button>
          <button type="button" class="btn btn-danger" (click)="ConfigThumbModal.hide()">Đóng</button>
        </div>
      </div>
    </form>
  </div>
</div>
