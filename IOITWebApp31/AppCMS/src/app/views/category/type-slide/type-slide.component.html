<div class="animated fadeIn cms-main">
  <div class="card cms-content">
    <div class="titleCat">
      <h1 class="cms-heading-inline">Danh mục slide</h1>
      <button class="cms-addnew" type="button" (click)="OpenDataModal(undefined)"><i class="fa fa-plus"></i>&nbsp;Thêm mới</button>
    </div>
    <div class="description-page">
      <!--<blockquote class="{{isNoitify ? 'hidden' : ''}}">
        <p>Khu vực hiển thị và quản lý danh sách các loại slide. Khu vực này chỉ cho Admin mới có quyền tạo mới, sửa và xoá. </p>
        <a class="close" href="javascript:void(0)" (click)="closeNoityfy()"><span>×</span></a>
      </blockquote>-->
    </div>
    <div class="card-body">
      <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
        <div class="row cms-filter action-table">
          <div class="col-sm-6 col-md-6" style="padding-left:0">
            <ng-select class="mw150-select"
                       [items]="ActionTable"
                       bindLabel="Name"
                       bindValue="Id"
                       [clearable]="true"
                       placeholder="Tác vụ"
                       [(ngModel)]="ActionId"
                       [ngModelOptions]="{standalone: true}">
            </ng-select>
            <button class="cms-addnew button-action" type="button" [disabled]="!ActionId" (click)="ActionTableFunc()">&nbsp;Áp dụng</button>
          </div>
          <!--<div class="col-sm-12 col-md-6" style="padding-left:0px; margin-left: -5px;    display: flex;">
            <ul class="cms-subsubsub">
              <li class="all"><a class="current" aria-current="page">Tất cả <span class="count">({{ paging.item_count }})</span></a>  </li>
              <li class="publish"><a>Hiển thị <span class="count">({{ paging.item_count }})</span></a></li>
            </ul>
          </div>-->
          <div class="col-sm-12 col-md-6" style="display: flex; justify-content: flex-end;align-items: flex-end; padding-right:0">
            <label style="margin-right:10px;display: flex;align-items: center;">
              <span class="search-box">Tìm kiếm</span>
              <input type="text" class="form-control form-control-sm" placeholder="Tìm kiếm theo mã và tên slide...." aria-controls="DataTables_Table_0" [(ngModel)]="q.txtSearch" (keyup.enter)="QueryChanged()">
            </label>

            <div class="dataTables_length" id="DataTables_Table_0_length">
              <label>
                Xem&nbsp;
                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" class="custom-select custom-select-sm form-control form-control-sm" [(ngModel)]="paging.page_size" (change)="GetListData()">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>&nbsp;bản ghi
              </label>
            </div>
          </div>
        </div>
        <!--<div class="row cms-filter action-table">
          <div class="col-sm-6 col-md-3" style="padding-left:0">
            <ng-select class="mw150-select"
                       [items]="ActionTable"
                       bindLabel="Name"
                       bindValue="Id"
                       [clearable]="true"
                       placeholder="Tác vụ"
                       [(ngModel)]="ActionId"
                       [ngModelOptions]="{standalone: true}">
            </ng-select>
            <button class="cms-addnew" type="button" [disabled]="!ActionId" (click)="ActionTableFunc()">&nbsp;Áp dụng</button>
          </div>
          <div class="col-sm-12 col-md-9">
          </div>
        </div>-->
        <div class="row content-table-data">
          <div class="col-sm-12">
            <table class="table list-cat table-striped table-bordered datatable dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="border-collapse: collapse !important">
              <thead>
                <tr role="row" class="">
                  <th class="btn-action-table" style="width: 5%;">
                    <div class="squaredcheck">
                      <input type="checkbox" class="checkbox1" id="CheckAll" name="CheckAll" [value]="true" (change)="CheckActionTable(undefined)" [(ngModel)]="CheckAll">
                      <label for="CheckAll"><span></span></label>
                    </div>
                  </th>
                  <th class="text-left column-name-key">
                    <span [ngClass]="GetClassSortTable('Name')" (click)="SortTable('Name')" class="sortBy">Tên loại slide</span>
                  </th>
                  <!--<th class="column-thumb text-center" style="width: 5%;"><i class="fa fa-image"></i></th>-->
                  <th class="column-hs">
                    Mã loại slide
                  </th>
                  <th class="column-hs">
                    <span>Mô tả</span>
                  </th>
                  <th class="column-hs text-center">
                    <span>Hiển thị</span>
                  </th>
                  <th class="column-hs text-center">
                    <span>Số giây chuyển</span>
                  </th>
                  <!--<th class="column-hs text-center">
                    <span>Chiểu dài</span>
                  </th>
                  <th class="column-hs text-center">
                    <span>Chiểu rộng</span>
                  </th>-->
                  <th class="column-hs text-center">
                    <span>Trạng thái</span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of listDatas; let i = index" role="row" ng-class-odd='odd' ng-class-even='even'>
                  <td class="btn-action-table" style="padding: 0.75rem!important;">
                    <div class="squaredcheck">
                      <input type="checkbox" class="checkbox1" id="Check{{item.TypeSlideId}}" name="Check{{item.TypeSlideId}}" [value]="true" [(ngModel)]="item.Action" (change)="CheckActionTable(item.TypeSlideId)">
                      <label for="Check{{item.TypeSlideId}}"><span></span></label>
                    </div>
                  </td>
                  <td class="sorting_1">
                    <span tooltip="{{ item.Name }}">{{ item.Name != undefined ? (item.Name | truncate:[8]) : '—' }}</span>
                    <ul class="cms-function">
                      <li class="id-item">ID: {{item.TypeSlideId}} | </li>
                      <li (click)="OpenDataModal(item)">Chỉnh sửa | </li>
                      <li (click)="ShowConfirmDelete(item.TypeSlideId)" class="detete-item">Xóa</li>
                    </ul>
                  </td>
                  <!--<td class="column-thumb">
                    <img src="../../../../assets/img/no-image1.png" style="border: 1px solid #ccc;" width="40" height="40" *ngIf="item.LogoHeader==undefined" />
                    <img src="{{ staticDomainMedia }}/{{item.LogoHeader}}" style="border: 1px solid #ccc;" width="40" height="40" *ngIf="item.LogoHeader!=undefined" />
                  </td>-->
                  <td>{{ item.Code}}</td>
                  <td>
                    {{ item.Description }}
                    <!--<span tooltip="{{ item.Description }}">{{ item.Description != undefined ? (item.Description | truncate:[15]) : '—' }}</span>-->
                  </td>
                  <td class="text-center">{{ item.NumberImage }}</td>
                  <td class="text-center">{{ item.TimeReset }}</td>
                  <!--<td class="text-center">{{ item.Width }}</td>
                  <td class="text-center">{{ item.Height }}</td>-->
                  <td class="text-center">
                    <label style="display: block; padding-top: 2px; margin: auto;" class="switch switch-label switch-pill switch-outline-primary-alt">
                      <input (change)="ConfirmShowHide(item, i)" type="checkbox" class="switch-input" [(ngModel)]="item.IsShow" [ngModelOptions]="{standalone: true}" [disabled]="CheckRole.Update!= true" />
                      <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
                    </label>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-5" style="padding-left:25px;">
            <div *ngIf="paging.item_count > 0" class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">
              Hiển thị <span>{{ (paging.page - 1) * paging.page_size + 1 }}</span> <i class="fa fa-long-arrow-right"></i>  <span>{{ paging.item_count < paging.page * paging.page_size ? paging.item_count : paging.page * paging.page_size }}</span>&nbsp;<i class="fa fa-ellipsis-v"></i>&nbsp;<span>{{ paging.item_count }}</span> bản ghi
            </div>
          </div>
          <div class="col-xs-12 col-md-7">
            <pagination [totalItems]="paging.item_count" [(ngModel)]="paging.page" [maxSize]="5" [itemsPerPage]="paging.page_size" class="pagination-sm pull-right"
                        previousText='<i class="fa-solid fa-chevron-left"></i>' nextText='<i class="fa-solid fa-chevron-right"></i>' [boundaryLinks]="true" (pageChanged)="PageChanged($event)"></pagination>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div [config]="{backdrop: 'static',  keyboard: false}" bsModal #CreateUpdateModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-big" role="document">
    <form class="login-form">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" *ngIf="!Item.TypeSlideId">Thêm mới loại slide</h4>
          <h4 class="modal-title" *ngIf="Item.TypeSlideId">Sửa loại slide</h4>
          <button type="button" class="close" (click)="CreateUpdateModal.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card">
            <div class="card-body body-form-add-new">
              <div class="col-sm-12 col-md-12 row" style="margin: 10px 0px 0px;background: #f1f1f1;">
                <div class="col col-sm-12 col-md-12">
                  <div class="form-group row">
                    <!--<label class="col-form-label">Thêm mới danh mục slide</label>-->
                  </div>
                </div>
                <div class="col col-sm-12 col-md-6">
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="Code">Mã loại slide: <span *ngIf="Item.Code==undefined || Item.Code==''" style="color: red;">&ngsp;(*)</span></label>
                    <div class="col-md-12">
                      <input type="text" id="Code" name="Code" class="form-control" placeholder="" [(ngModel)]="Item.Code" autocomplete="off">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="Name">Tên loại slide: <span *ngIf="Item.Name==undefined || Item.Name==''" style="color: red;">&ngsp;(*)</span></label>
                    <div class="col-md-12">
                      <input type="text" id="Name" name="Name" class="form-control" placeholder="" [(ngModel)]="Item.Name" autocomplete="off">
                    </div>
                  </div>
                </div>
                <div class="col col-sm-12 col-md-6">
                  <div class="form-group row" sty1le=" margin-top: 20px;">
                    <label class="col-md-12 col-form-label" for="file-input">Trạng thái hiện thị: <span *ngIf="Item.StatusView==undefined" style="color: red;">&ngsp;(*)</span></label>
                    <div class="col-md-12" style="padding-top:8px">
                      <label><input type="checkbox" name="optradio" [(ngModel)]="Item.StatusView" value="1"> Hiện thị/ Không hiện thị</label>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="">Hiện thị:  <span *ngIf="Item.NumberImage==undefined" style="color: red;">&ngsp;(*)</span></label>
                    <div class="col-md-12">
                      <ng-select [items]="listNumberImages"
                                 bindLabel="Name"
                                 bindValue="Id"
                                 placeholder="Chọn số lượng ảnh"
                                 [(ngModel)]="Item.NumberImage"
                                 [ngModelOptions]="{standalone: true}">
                        <ng-template ng-label-tmp let-item="item">
                          <span>{{item.Name}}</span>
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item" let-index="index">
                          <span [innerHTML]="item.Space"></span><span>{{item.Name}}</span>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-md-12 row" style="margin:0;background:#f1f1f1;">
                <div class="col col-sm-12 col-md-4">
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="TimeReset">Số giây chuyển: <span *ngIf="Item.TimeReset==undefined" style="color: red;">&ngsp;(*)</span></label>
                    <div class="col-md-12">
                      <input type="number" id="TimeReset" name="TimeReset" class="form-control" placeholder="" [(ngModel)]="Item.TimeReset" autocomplete="off">
                    </div>
                  </div>
                </div>
                <!--<div class="col col-sm-12 col-md-4">
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="Width">Chiều dài:</label>
                    <div class="col-md-12">
                      <input type="number" id="Width" name="Width" class="form-control" placeholder="" [(ngModel)]="Item.Width" autocomplete="off">
                    </div>
                  </div>
                </div>-->
                <!--<div class="col col-sm-12 col-md-4">
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="Height">Chiều rộng:</label>
                    <div class="col-md-12">
                      <input type="number" id="Height" name="Height" class="form-control" placeholder="" [(ngModel)]="Item.Height" autocomplete="off">
                    </div>
                  </div>
                </div>-->
              </div>

              <div class="col-sm-12 col-md-12 row" style="margin: 0px; padding-top: 10px; padding-bottom: 10px;background:#f1f1f1;">
                <div class="col col-sm-12 col-md-12">
                  <div class="form-group row">
                    <label class="col-md-12 col-form-label" for="Description">Mô tả chi tiết: </label>
                    <div class="col-md-12">
                      <input type="text" id="Description" name="Description" class="form-control" placeholder="" [(ngModel)]="Item.Description" autocomplete="off">
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" appNoDblClickMat (click)="SaveData()">Lưu thông tin</button>
          <button type="button" class="btn btn-danger" (click)="CreateUpdateModal.hide()">Đóng</button>
        </div>
      </div>
    </form>
  </div>
</div>
