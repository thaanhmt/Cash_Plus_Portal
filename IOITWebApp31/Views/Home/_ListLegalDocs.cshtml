@model IEnumerable<IOITWebApp31.Models.EF.LegalDoc>
@using IOITWebApp31.Models;
<div class="row row-small row-lengislation">
    <div class="col col-12 col-lengislation">
        @if (Model != null)
        {
            @foreach (var item in Model)
            {
                @if (ViewBag.LanguageId == "1008")
                {
                    var extn = item.Attactment.Split(".").Last();
                    <article class="item-lengislation">
                        <div class="head-lengislation">
                            <h2 class="title-lengislation"><a href="/van-ban/@(item.Url)-@(item.LegalDocId)">@item.Name</a></h2>
                            <div class="block-views-lengis">
                                @if (extn == "pdf")
                                {
                                    <div class="view-pdf">
                                        <i class="views-icon"></i>
                                        <span><a href="/uploads/@item.Attactment" target="_">View Online</a></span>
                                    </div>
                                }
                                <div class="download-pdf">
                                    <i class="download-icon"></i>
                                    <span><a href="/uploads/@item.Attactment" download>Download</a></span>
                                </div>
                            </div>
                        </div>
                        <div class="body-lengislation">
                            <div class="left-content-lengislation">
                                @item.TichYeu
                            </div>
                            <div class="right-content-lengislation">
                                <div class="field-right-lengislation">
                                    <div class="label">Promulgate:  </div>
                                    <div class="content-field-lengislation">@item.DateIssue.Value.ToString("dd/MM/yyyy")</div>
                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Effect:  </div>
                                    <div class="content-field-lengislation">@item.DateEffect.Value.ToString("dd/MM/yyyy")</div>
                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Status: </div>
                                    @if (item.DateEffect < DateTime.Now)
                                    {
                                        <div class="content-field-lengislation text-success">Already in effect</div>
                                    }
                                    else
                                    {
                                        <div class="content-field-lengislation text-danger">No effect yet</div>
                                    }

                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Agency issued: </div>
                                    <div class="content-field-lengislation"> @await Component.InvokeAsync("BlockNameAgency", new { AgencyIssued = item.AgencyIssued })</div>
                                </div>
                            </div>
                        </div>
                    </article>
                }else{
                    var extn = item.Attactment.Split(".").Last();
                    <article class="item-lengislation">
                        <div class="head-lengislation">
                            <h2 class="title-lengislation"><a href="/van-ban/@(item.Url)-@(item.LegalDocId)">@item.Name</a></h2>
                            <div class="block-views-lengis">
                                @if (extn == "pdf")
                                {
                                    <div class="view-pdf">
                                        <i class="views-icon"></i>
                                        <span><a href="/uploads/@item.Attactment" target="_">Xem Online</a></span>
                                    </div>
                                }
                                <div class="download-pdf">
                                    <i class="download-icon"></i>
                                    <span><a href="/uploads/@item.Attactment" download>Tải về</a></span>
                                </div>
                            </div>
                        </div>
                        <div class="body-lengislation">
                            <div class="left-content-lengislation">
                                @item.TichYeu
                            </div>
                            <div class="right-content-lengislation">
                                <div class="field-right-lengislation">
                                    <div class="label">Ban hành:  </div>
                                    <div class="content-field-lengislation">@item.DateIssue.Value.ToString("dd/MM/yyyy")</div>
                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Hiệu lực:  </div>
                                    <div class="content-field-lengislation">@item.DateEffect.Value.ToString("dd/MM/yyyy")</div>
                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Trạng thái: </div>
                                    @if (item.DateEffect < DateTime.Now)
                                    {
                                        <div class="content-field-lengislation text-success">Đã có hiệu lực</div>
                                    }
                                    else
                                    {
                                        <div class="content-field-lengislation text-danger">Chưa có hiệu lực</div>
                                    }

                                </div>
                                <div class="field-right-lengislation">
                                    <div class="label">Cơ quan ban hành: </div>
                                    <div class="content-field-lengislation"> @await Component.InvokeAsync("BlockNameAgency", new { AgencyIssued = item.AgencyIssued })</div>
                                </div>
                            </div>
                        </div>
                    </article>
                }
            }

            <section class="section pagging">
                <div class="bg section-bg"></div>
                <div class="section-content relative container">
                    <div class="row">
                        <div class="col col-12">
                            @if (int.Parse(ViewBag.total.ToString()) >= int.Parse(ViewBag.np.ToString()))
                            {
                                <ul class="page-numbers nav-pagination links text-center">
                                    @if ((int)ViewBag.Pre <= 0)
                                    {
                                    }
                                    else
                                    {
                                        <li><a href='javascript:void(0);' class="prev page-number" onclick="LoadLeganDocs(@ViewBag.Pre)"><i class="fas fa-angle-left"></i></a></li>
                                    }

                                    @if ((ViewBag.Page + 5) <= ViewBag.totalPage)
                                    {
                                        @for (int i = ViewBag.Page; i <= (ViewBag.Page + 5); i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number current">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='javascript:void(0);' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }
                                    else if ((ViewBag.Page + 4) <= ViewBag.totalPage)
                                    {
                                        @for (int i = ViewBag.Page; i <= (ViewBag.Page + 4); i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number current">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='#' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }
                                    else if ((ViewBag.Page + 3) <= ViewBag.totalPage)
                                    {
                                        @for (int i = ViewBag.Page; i <= (ViewBag.Page + 3); i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number current">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='javascript:void(0);' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }
                                    else if ((ViewBag.Page + 2) <= ViewBag.totalPage)
                                    {
                                        @for (int i = ViewBag.Page; i <= (ViewBag.Page + 2); i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='javascript:void(0);' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }
                                    else if ((ViewBag.Page + 1) <= ViewBag.totalPage)
                                    {
                                        @for (int i = ViewBag.Page; i <= (ViewBag.Page + 1); i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number current">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='javascript:void(0);' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }
                                    else if ((ViewBag.Page) <= ViewBag.totalPag)
                                    {
                                        @for (int i = ViewBag.Page; i <= ViewBag.totalPage; i++)
                                        {
                                            if (ViewBag.Page == i)
                                            {
                                                <li><span class="page-number current">@i</span></li>
                                            }
                                            else
                                            {
                                                <li><a href='javascript:void(0);' class="page-number" onclick="LoadLeganDocs(@i)">@i</a></li>
                                            }
                                        }
                                    }

                                    @if ((int)ViewBag.Next > (int.Parse(ViewBag.total.ToString()) / int.Parse(ViewBag.np.ToString())) + 1)
                                    {
                                    }
                                    else
                                    {
                                        <li><a href='javascript:void(0);' class="next page-number" onclick="LoadLeganDocs(@ViewBag.Next)"><i class="fas fa-angle-right"></i></a></li>
                                    }
                                </ul>
                            }
                        </div>
                    </div>
                </div>
            </section>
        }
    </div>
</div>