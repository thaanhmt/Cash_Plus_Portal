@model IEnumerable<IOITWebApp31.Models.Data.DataSetDTO>
@using IOITWebApp31.Models;

<div class="list-widget">
    @if (Model != null)
    {
        @foreach (var item in Model)
        {
            <div class="item-wigget">
                <div class="title-item">
                    <a href="/chi-tiet-du-lieu/@item.Url-@item.DataSetId" class="textLine-2">
                        @item.Title
                    </a>
                </div>
                <div class="meta-item">
                    <div class="views">
                        <i class="fa-solid fa-eye"></i> <span>@item.ViewNumber </span>
                    </div>
                    <div class="download">
                        <i class="fa-solid fa-cloud-arrow-down"></i> <span>@item.DownNumber </span>
                    </div>
                    <div class="date-pub">Ngày tạo: <span>@item.CreatedAt.Value.ToString("dd/MM/yyyy")</span></div>
                </div>
                <div class="exception textLine-2">
                    @(item.Description.Length > 100 ? item.Description.Substring(0, item.Description.Substring(0, 100).LastIndexOf(' ')) + "..." : item.Description)
                </div>
            </div>
        }
    }
</div>
@*
@if (Model != null)
{

    <div class="row-datatq aaa">
        <div class="main-secdata">
            @foreach (var item in Model)
            {
                <div class="item-data-detail">
                    <div class="head-data">
                        <div class="info-data">
                            <div class="title-item">
                                <a href="/chi-tiet-du-lieu/@item.Url-@item.DataSetId" class="textLine-2">
                                    @item.Title
                                </a>
                            </div>
                            <div class="author-data">@item.AuthorName</div>
                        </div>
                        <div class="meta-data">
                            <div class="top-meta">
                                @if (item.RateStar != null && item.RateStar != 0)
                                {
                                    <div class="rating color-@item.RateStar">

                                        <i class="fa-solid fa-star"></i>
                                    </div>
                                }
                                <div class="count-views">
                                    <i class="fa-solid fa-eye"></i>
                                    <span>@item.ViewNumber</span>
                                </div>
                                <div class="count-download">
                                    <i class="fa-solid fa-cloud-arrow-down"></i>
                                    <span>@item.DownNumber</span>
                                </div>
                            </div>
                            <div class="bottom-meta">
                                <div class="date-created">
                                    Ngày tạo: @item.CreatedAt.Value.ToString("dd/MM/yyyy")
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-data">
                        @(item.Description.Length > 500 ? item.Description.Substring(0, item.Description.Substring(0, 500).LastIndexOf(' ')) + "..." : item.Description)
                    </div>
                    <div class="bottom-data">
                        <div class="source-upload">
                            @if (item.userCreated != null)
                            {
                                <a href="/du-lieu-ca-nhan/@item.UserCreatedId">Đăng tải bởi: @item.userCreated.FullName / @item.userCreated.UnitName</a>
                            }
                        </div>
                        <div class="action-data">
                            <div class="pdf-action">
                                @if (item.listFiles.Count > 0)
                                {
                                    @foreach (var itemF in item.listFiles)
                                    {
                                        if (itemF.ExtensionName == "CSV")
                                        {
                                            <img src="/images/icons/csv-13-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "DOC" || itemF.ExtensionName == "DOCX")
                                        {
                                            <img src="/images/icons/doc-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "JPG" || itemF.ExtensionName == "JPEG")
                                        {
                                            <img src="/images/icons/jpg-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "MP3")
                                        {
                                            <img src="/images/icons/mp3-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "PDF")
                                        {
                                            <img src="/images/icons/pdf-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "PNG")
                                        {
                                            <img src="/images/icons/png-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "TXT")
                                        {
                                            <img src="/images/icons/txt-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "XLS" || itemF.ExtensionName == "XLSX")
                                        {
                                            <img src="/images/icons/txt-icon-512.png" />
                                        }
                                        else if (itemF.ExtensionName == "ZIP")
                                        {
                                            <img src="/images/icons/zip-icon-1-512.png" />
                                        }
                                        else
                                        {
                                            <span class="extension-file">@itemF.ExtensionName</span>
                                        }
                                    }
                                }
                            </div>
                            @if (ViewBag.CustomerId != null)
                            {
                                <div class="download-action">
                                    <a onclick="DownloadFileRar(@item.DataSetId, @ViewBag.CustomerId, @Html.Raw(ViewBag.access_token))"><i class="fa-solid fa-cloud-arrow-down"></i></a>
                                </div>
                            }
                            else
                            {
                                <div class="download-action">
                                    <a href="/dang-nhap" ><i class="fa-solid fa-cloud-arrow-down"></i></a>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="loadding-animate">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff0;display:block;" width="115px" height="115px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
        <g transform="translate(20 50)">
            <circle cx="0" cy="0" r="6" fill="#96c639">
                <animateTransform attributeName="transform" type="scale" begin="-0.4807692307692307s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1.282051282051282s" repeatCount="indefinite"></animateTransform>
            </circle>
        </g>
        <g transform="translate(40 50)">
            <circle cx="0" cy="0" r="6" fill="#96c639">
                <animateTransform attributeName="transform" type="scale" begin="-0.3205128205128205s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1.282051282051282s" repeatCount="indefinite"></animateTransform>
            </circle>
        </g>
        <g transform="translate(60 50)">
            <circle cx="0" cy="0" r="6" fill="#96c639">
                <animateTransform attributeName="transform" type="scale" begin="-0.16025641025641024s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1.282051282051282s" repeatCount="indefinite"></animateTransform>
            </circle>
        </g>
        <g transform="translate(80 50)">
            <circle cx="0" cy="0" r="6" fill="#96c639">
                <animateTransform attributeName="transform" type="scale" begin="0s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1.282051282051282s" repeatCount="indefinite"></animateTransform>
            </circle>
        </g>
    </svg>
</div>
}*@